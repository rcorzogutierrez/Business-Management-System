/* ============================================
   HOST & CSS VARIABLES (tema indigo)
   ============================================ */

:host {
  display: block;
  --btn-accent-gradient: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%);
  --btn-accent: #6366f1;
  --btn-accent-shadow: rgba(99, 102, 241, 0.3);
  --btn-accent-shadow-hover: rgba(99, 102, 241, 0.4);
}

/* BOTONES (.btn-primary, .btn-danger, .icon-btn) → centralizados en styles.css (BUTTON SYSTEM) */

/* Bulk Actions Bar */
.bulk-actions-bar {
  @apply flex items-center justify-between gap-4 p-4 rounded-xl;
  @apply bg-purple-50 border border-purple-200 mb-4;
}

.bulk-icon {
  @apply w-9 h-9 bg-purple-500 rounded-lg flex items-center justify-center;
}

.bulk-icon mat-icon {
  @apply text-white text-xl;
  font-size: 20px !important;
  width: 20px !important;
  height: 20px !important;
}

/* Empty State */
.empty-state {
  @apply flex flex-col items-center justify-center py-16 px-4 bg-slate-50 rounded-2xl;
}

.empty-state-icon {
  @apply w-20 h-20 rounded-2xl flex items-center justify-center mb-4;
}

.empty-state-icon.purple {
  @apply bg-purple-100;
}

.empty-state-icon mat-icon {
  @apply text-purple-400;
  font-size: 48px !important;
  width: 48px !important;
  height: 48px !important;
}

.empty-state h3 {
  @apply text-lg font-semibold text-slate-600 mb-2;
}

.empty-state p {
  @apply text-slate-500 text-center mb-6;
}

/* Data Table */
.data-table {
  @apply w-full;
}

.data-table thead {
  @apply bg-slate-50 border-b border-slate-200;
}

.data-table th {
  @apply px-4 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider;
}

.data-table tbody tr {
  @apply border-b border-slate-100 transition-colors hover:bg-slate-50;
}

.data-table tbody tr.selected {
  @apply bg-purple-50;
}

.data-table td {
  @apply px-4 py-4 text-sm text-slate-700;
}

/* Vista Calendario */
.calendar-view {
  @apply animate-fadeIn;
  position: relative;
}

/* Indicador de scroll para móviles */
@media (max-width: 768px) {
  .calendar-view::after {
    content: '← Desliza →';
    position: sticky;
    right: 0;
    bottom: 10px;
    background: rgba(147, 51, 234, 0.9);
    color: white;
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 10px;
    font-weight: 600;
    z-index: 10;
    pointer-events: none;
    animation: fadeInOut 3s ease-in-out;
    display: block;
    text-align: center;
    margin: 10px auto 0;
    width: fit-content;
  }

  @keyframes fadeInOut {
    0%, 100% { opacity: 0; }
    10%, 90% { opacity: 1; }
  }
}

.day-header {
  @apply bg-white rounded-lg border border-slate-200 p-2 text-center transition-all;
}

.day-header.today {
  @apply bg-purple-50 border-purple-300 shadow-sm;
}

.day-name {
  @apply text-[10px] font-semibold text-slate-600 uppercase mb-0.5;
}

.day-number {
  @apply text-xl font-bold text-slate-800;
}

.day-header.today .day-number {
  @apply text-purple-600;
}

.day-month {
  @apply text-[10px] text-slate-500 mt-0.5;
}

.day-cell {
  @apply bg-white rounded-lg border border-slate-200 p-2 min-h-[180px] transition-all hover:border-slate-300;
  overflow-y: auto;
  max-height: 400px;
}

.day-cell.today {
  @apply bg-purple-50/30 border-purple-200;
}

.empty-day {
  @apply flex flex-col items-center justify-center h-full py-6 text-center;
}

/* Scrollbar personalizado para celdas de día */
.day-cell::-webkit-scrollbar {
  width: 4px;
}

.day-cell::-webkit-scrollbar-track {
  background: transparent;
}

.day-cell::-webkit-scrollbar-thumb {
  background: #cbd5e1;
  border-radius: 4px;
}

.day-cell::-webkit-scrollbar-thumb:hover {
  background: #94a3b8;
}

/* Plan Card */
.plan-card {
  @apply relative bg-white rounded-md border border-slate-200 p-2 mb-1.5 cursor-pointer transition-all;
  @apply hover:shadow-sm hover:border-slate-300;
  border-left-width: 3px;
}

.plan-card:last-child {
  @apply mb-0;
}

.plan-checkbox {
  @apply absolute top-1.5 right-1.5;
  transform: scale(0.85);
  z-index: 5;
}

/* Contenido simplificado del plan */
.plan-content-simple {
  @apply flex items-center gap-2;
  padding-right: 32px; /* Espacio para el checkbox absoluto */
}

.status-badge-mini {
  @apply flex-shrink-0 w-5 h-5 rounded-full flex items-center justify-center;
}

.status-badge-mini mat-icon {
  font-size: 14px !important;
  width: 14px !important;
  height: 14px !important;
}

.plan-description {
  @apply flex-1 text-xs font-medium text-slate-800 truncate leading-tight;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  margin: 0;
}

.plan-actions-btn {
  @apply flex-shrink-0 flex items-center justify-center rounded bg-transparent;
  @apply hover:bg-slate-100 transition-colors cursor-pointer border-none;
  width: 28px !important;
  height: 28px !important;
  padding: 0 !important;
}

.plan-actions-btn mat-icon {
  font-size: 18px !important;
  width: 18px !important;
  height: 18px !important;
  color: #64748b;
}

/* Estilos legacy para otras vistas */
.plan-content {
  @apply pr-2;
}

.plan-title {
  @apply text-xs font-semibold text-slate-800 mb-1 line-clamp-2 leading-tight;
}

.plan-detail {
  @apply flex items-center gap-1 text-[10px] text-slate-600 mb-0.5;
}

.plan-detail mat-icon {
  @apply text-sm text-slate-400;
  font-size: 14px !important;
  width: 14px !important;
  height: 14px !important;
}

.plan-actions {
  @apply absolute bottom-1.5 right-1.5;
}

/* Status Badge */
.status-badge {
  @apply inline-flex items-center gap-0.5 px-1.5 py-0.5 rounded-full text-[10px] font-medium;
}

.status-badge mat-icon {
  font-size: 12px !important;
  width: 12px !important;
  height: 12px !important;
}

.badge-blue {
  @apply bg-blue-100 text-blue-700;
}

.badge-amber {
  @apply bg-amber-100 text-amber-700;
}

.badge-green {
  @apply bg-green-100 text-green-700;
}

.badge-slate {
  @apply bg-slate-100 text-slate-700;
}

/* Botones de vista - Ahora usando Tailwind inline */

/* Vista Timeline */
.timeline-view {
  @apply animate-fadeIn;
}

.timeline-item {
  @apply relative pl-8 pb-8 border-l-4 border-slate-200 cursor-pointer transition-all;
  @apply hover:border-opacity-80;
}

.timeline-item:last-child {
  @apply pb-0 border-l-0;
}

.timeline-marker {
  @apply absolute left-0 top-0 w-4 h-4 rounded-full transform -translate-x-[10px];
  @apply ring-4 ring-white;
}

.timeline-content {
  @apply bg-white rounded-xl border border-slate-200 p-4 shadow-sm;
  @apply hover:shadow-md transition-all;
}

.timeline-date {
  @apply text-sm font-semibold text-purple-600;
}

.timeline-title {
  @apply text-lg font-bold text-slate-800 mb-3;
}

.timeline-details {
  @apply grid grid-cols-1 md:grid-cols-2 gap-2 mt-3;
}

.timeline-detail-item {
  @apply flex items-center gap-2 text-sm text-slate-600;
}

.timeline-detail-item mat-icon {
  @apply text-base text-slate-400;
}

/* Búsqueda y Filtros - Ahora usando Tailwind inline */

/* BOTONES (.icon-btn-sm) → centralizados en styles.css (BUTTON SYSTEM) */

/* Animations */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fadeIn {
  animation: fadeIn 0.3s ease-out;
}

/* Responsive */
/* Para pantallas medianas - cuando DevTools está abierto */
@media (max-width: 1400px) {
  .day-header {
    @apply p-1.5;
  }

  .day-name {
    @apply text-[9px];
  }

  .day-number {
    @apply text-lg;
  }

  .day-month {
    @apply text-[9px];
  }

  .day-cell {
    @apply p-1.5 min-h-[160px];
  }

  .plan-card {
    @apply p-1.5 mb-1;
  }

  /* Badge mini más pequeño */
  .status-badge-mini {
    @apply w-4 h-4;
  }

  .status-badge-mini mat-icon {
    font-size: 12px !important;
    width: 12px !important;
    height: 12px !important;
  }

  /* Descripción más pequeña */
  .plan-description {
    @apply text-[11px];
  }

  /* Botón de acciones más pequeño */
  .plan-actions-btn {
    width: 24px !important;
    height: 24px !important;
  }

  .plan-actions-btn mat-icon {
    font-size: 16px !important;
    width: 16px !important;
    height: 16px !important;
  }

  .empty-day {
    @apply py-4;
  }

  .empty-day mat-icon {
    font-size: 20px !important;
  }
}

/* Para pantallas pequeñas - móviles */
@media (max-width: 768px) {
  /* Hacer calendario scrollable horizontalmente */
  .calendar-view {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }

  /* Forzar ancho mínimo para que las 7 columnas se vean bien */
  .calendar-view > div {
    min-width: 700px;
  }

  /* Personalizar scrollbar horizontal */
  .calendar-view::-webkit-scrollbar {
    height: 6px;
  }

  .calendar-view::-webkit-scrollbar-track {
    background: #f1f5f9;
    border-radius: 3px;
  }

  .calendar-view::-webkit-scrollbar-thumb {
    background: #9333ea;
    border-radius: 3px;
  }

  .calendar-view::-webkit-scrollbar-thumb:hover {
    background: #7e22ce;
  }

  .day-cell {
    @apply min-h-[140px];
  }

  /* Simplificar card en móviles */
  .plan-card {
    @apply p-1.5 mb-1;
  }

  /* Ocultar checkbox en móviles para no sobreponerse */
  .plan-checkbox {
    display: none !important;
  }

  /* Badge mini más pequeño en móviles */
  .status-badge-mini {
    @apply w-4 h-4;
  }

  .status-badge-mini mat-icon {
    font-size: 12px !important;
    width: 12px !important;
    height: 12px !important;
  }

  /* Descripción más pequeña en móviles */
  .plan-description {
    @apply text-[10px];
  }

  /* Botón de acciones más pequeño en móviles */
  .plan-actions-btn {
    width: 22px !important;
    height: 22px !important;
  }

  .plan-actions-btn mat-icon {
    font-size: 14px !important;
    width: 14px !important;
    height: 14px !important;
  }

  .timeline-details {
    @apply grid-cols-1;
  }

  /* Hacer filtros responsivos */
  .filter-btn {
    @apply px-2 py-1 text-[10px];
  }

  .filter-btn mat-icon {
    font-size: 14px !important;
  }

  .filter-btn span {
    display: none;
  }

  /* Botones de vista más compactos */
  .view-mode-btn {
    @apply px-2 py-1.5;
  }

  .view-mode-btn mat-icon {
    font-size: 18px !important;
  }

  /* Botón Hoy más pequeño */
  .today-btn {
    @apply px-2 py-1 text-[10px];
  }

  .today-btn mat-icon {
    font-size: 16px !important;
  }

  .today-btn span {
    @apply text-[10px];
  }

  /* Fecha de rango más pequeña */
  .flex.items-center.gap-2 span {
    @apply text-[10px];
  }

  /* Ocultar buscador en móviles para ahorrar espacio */
  .search-box {
    display: none !important;
  }

  /* Hacer controles wrap mejor */
  .bg-white.rounded-xl.p-4 {
    @apply p-2;
  }

  /* Iconos de navegación más pequeños */
  .icon-btn mat-icon {
    font-size: 20px !important;
  }
}

/* Para pantallas muy pequeñas */
@media (max-width: 640px) {
  .calendar-view > div {
    min-width: 600px;
  }

  .day-header {
    @apply p-1;
  }

  .day-name {
    @apply text-[8px];
  }

  .day-number {
    @apply text-base;
  }

  .day-month {
    @apply text-[8px];
  }
}
