<!-- client-config.component.html - DISEÑO COMPACTO CON TAILWIND -->
<div class="app-container">

  <!-- ========== HEADER - Usando ModuleHeaderComponent ========== -->
  <app-module-header
    icon="settings"
    title="Configuración del Módulo"
    subtitle="Administra campos personalizados y diseño del formulario"
    moduleColor="purple"
    [showBackButton]="true"
    backButtonTooltip="Volver a clientes"
    [stats]="headerStats()"
    [actionButtons]="headerActions()"
    (backAction)="goBack()">
  </app-module-header>

  <!-- ============================================
       LOADING STATE
       ============================================ -->
  @if (isLoading && fields.length === 0) {
    <div class="bg-white rounded-2xl border border-slate-200 p-16 text-center flex flex-col items-center justify-center">
      <mat-spinner diameter="40"></mat-spinner>
      <p class="mt-3 text-sm text-slate-600">Cargando configuración...</p>
    </div>
  }

  <!-- ============================================
       CONFIGURACIÓN DE LA TABLA - Usando componente compartido
       ============================================ -->
  @if (!isLoading && gridConfig()) {
    <div class="mb-5">
      <app-grid-config-section
        [gridConfig]="gridConfig()"
        moduleColor="purple"
        entityLabel="clientes"
        [pageSizeOptions]="pageSizeOptions"
        [itemsPerPage]="itemsPerPageSignal()"
        [isLoading]="isLoading"
        [allFeaturesEnabled]="allFeaturesEnabled()"
        (configChange)="onConfigChange($event)"
        (toggleAll)="toggleAllFeatures()"
      />
    </div>
  }

  <!-- ============================================
       FORM DESIGNER
       ============================================ -->
  @if (!isLoading || fields.length > 0) {
    <section class="animate-fadeInUp">
      <app-form-designer
        [fields]="fields"
        [layout]="formLayout"
        [configService]="configService"
        [moduleName]="'clientes'"
        (layoutChange)="onLayoutChange($event)"
        (fieldAdded)="onFieldAdded()">
      </app-form-designer>
    </section>
  }

</div>
